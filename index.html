<!DOCTYPE html>
<html lang="en">
<head>
    <title>Harvest</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta property="og:title" content=Harvest/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://tfukaza.github.io/harvest/logo.png"/>
    <link rel="icon" href="/favicon.ico" />

    <link href="/harvest-website/asset/prism.css" rel="stylesheet">
    <link href="/harvest-website/css/main.css" rel="stylesheet">
    
    <link href="/harvest-website/css/landing.css" rel="stylesheet" ">
    
</head>
<body> 
     <nav>
    <a id="logo" href="/harvest-website/" >       
        <img src="/harvest-website/asset/logo.svg"/>
    </a>
    <!-- <a id="logo-mobile" href="/harvest-website/" >
        <img src="/harvest-website/asset/logo-mobile.svg"/>
    </a> -->
    <ul>
        <li><a href="/harvest-website/tutorials">Tutorials</a></li>
        <li><a href="/harvest-website/docs">Docs</a></li>
    </ul>
    <a id="github" href="https://github.com/tfukaza/harvest"><img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" /></a>
</nav>
    <main>
        <section id="main">
    <h1>
        Anyone</br>can make trading bots.
    </h1>
    <p>
        Harvest is a Python framework that takes the pain out of setting up an algorithmic trading system from scratch.
    </p>
    <a href="/harvest-website/tutorials/starter">
        <button>Startup Guide</button>
    </a>
</section>
<section id = "intro">
    <div class="card shadow col-2" id="beginner-friendly">
        <h2>Beginners </br>Welcome <span>ðŸ˜Š</span></h2>
        <p>
            If youâ€™re new to trading, coding, or both - no worries, Harvest was specifically designed so 
            beginners in both trading and coding can easily get started. 
        </p>
    </div>
    <div class="card shadow col-2" id="modular-moddable">
        <h2>Modular & </br>Moddable&nbsp;<span>ðŸ’»</span></h2>
        <p>
            The code is highly modularized so users can mix 
            and match any brokers and databases with ease, 
            while developers can quickly build new plugins and modules.
        </p>
    </div>
</section>
<section id="try">
    <h2>See for Yourself!</h2>
    <p>The API is amazingly simple to code with.</p>
    <div id="try-text">
        
        <p>Trade</p>
        <div class="select" id="asset-type">
            <p>Select asset type</p>
            <div>    
                <li>stock</li>
                <li>crypto</li>
            </div>
        </div></br>
        <p>for</p>
        <div class="text" id="symbols" contenteditable="true">
            <span contenteditable="False">SPY</span>
        </div></br>
        <p>every</p>
        <div class="select" id="interval">
            <p>Select interval</p>
            <div>
                <li>minute</li>
                <li>5 minutes</li>
                <li>15 minutes</li>
                <li>30 minutes</li>
                <li>hour</li>
                <li>day</li> 
            </div>
        </div></br>
        <p>using</p>
        <div class="select" id="strategy">
            <p>Select strategy</p>
            <div>
                <li>SMA Crossover</li>
                <li>RSI</li>
            </div>
        </div>
        <p>strategy</p>
    </div>
    <div class="shadow-dark" id="try-code">
        <div class="code-header">
            <div class="red"></div>
            <div class="yellow"></div>
            <div class="green"></div>
        </div>
        <code>
            <pre>
class Watch(BaseAlgo):
    def config(self):
        self.watchlist=<span id="symbols-code">["SPY"]</span>
        self.interval=<span id="interval-code">None</span>
    
    def main(self):<span id="strategy-code">
        sma_long = self.sma(period=50)
        sma_short = self.sma(period=20)
        if self.crossover(sma_long, sma_short):
            self.buy()
        elif self.crossover(sma_short, sma_long):
            self.sell()</span>
            </pre>
            <div class="line-numbers">
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
                <span class="number"></span>
                
            </div>
        </code>
    </div>
    <!-- <div class="shadow-dark" id="try-shell">
        <div class="code-header">
            <div class="red"></div>
            <div class="yellow"></div>
            <div class="green"></div>
        </div>

    </div> -->
</section>

<script>

    let selects = document.querySelectorAll('.select');
    for (let sel of selects) {
        sel.style.zIndex = 1;
        let text = sel.querySelector('p');
        let options = sel.querySelectorAll('li');
        for (let opt of options) {
            opt.addEventListener('click', function() {
                sel.setAttribute('selection', opt.innerHTML);
                text.innerHTML = opt.innerHTML;
            });
        }
        let div = sel.querySelector('div');
        div.setAttribute('length', options.length * (options[0].offsetHeight+6) + 10);
        div.style.height = '0px';

        sel.addEventListener('click', function(event) { 
            let div2 = this.querySelector('div');
            for (let s of selects) {
                if (s !== this) {
                    s.classList.remove('open');
                    s.style.zIndex = 1;
                    s.querySelector('div').style.height = '0px';
                } 
            }
            if (this.classList.contains('open')){
                this.classList.remove('open');
                div2.style.height = '0px';
            } else {
                this.style.zIndex = 2;
                div2.style.height = div2.getAttribute('length')+'px';
                this.classList.add('open');
            }
        });
    }

    document.addEventListener('click', function(event) {
        let sel = event.target.closest('.select');
        if (sel) {
            return;
        }
        for (let sel of selects) {
            sel.classList.remove('open');
            let div2 = sel.querySelector('div');
            div2.style.height = '0px';
        }
    });

    let texts = document.querySelectorAll('.text');
    for (let txt of texts) {
        txt.addEventListener('keydown', function(event) {
            if (event.key == ' ') {
                let plain = Array.from(txt.childNodes).filter(t => t.nodeName !== "SPAN")
                for (let p of plain) {
                    let plain_text = p.wholeText;
                    console.log(plain_text);
                    if (plain_text.match(/^\s+$/) !== null) {
                        //txt.removeChild(p);
                        continue;
                    }
                    let bubble = document.createElement('span');
                    bubble.innerHTML = plain_text.toUpperCase().trim();
                    bubble.contentEditable = false;
                    txt.insertBefore(bubble, p);
                    txt.removeChild(p);
                }
            } else {

            }
        });
    }

    let symbols_text = document.getElementById('symbols');
    let symbols_code = document.getElementById('symbols-code');
    let asset_type = document.getElementById('asset-type');
    let interval = document.getElementById('interval');
    let interval_code = document.getElementById('interval-code');
    let strategy = document.getElementById('strategy');
    let strategy_code = document.getElementById('strategy-code');

    symbols_text.addEventListener('keyup', update_symbol_list);
    asset_type.addEventListener('click', update_symbol_list);

    function update_symbol_list(event){
        let symbols = Array.from(symbols_text.childNodes).filter(t => t.nodeName === "SPAN");
        symbols = symbols.map(s => s.innerHTML);
        if (asset_type.getAttribute('selection') == 'crypto') {
            symbols = symbols.map(s => '@'+s);
        }
        symbols_code.innerHTML = JSON.stringify(symbols);
    }

    interval.addEventListener('click', function(event) {
        let int = interval.getAttribute('selection');
        switch(int) {
            case 'minute':
                interval_code.innerHTML = "'1MIN'";
                break;
            case '5 minutes':
                interval_code.innerHTML = "'5MIN'";
                break;
            case '15 minutes':
                interval_code.innerHTML = "'15MIN'";
                break;
            case '30 minutes':
                interval_code.innerHTML = "'30MIN'";
                break;
            case 'hour':
                interval_code.innerHTML = "'1HR'";
                break;
            case 'day':
                interval_code.innerHTML = "'1DAY'";
                break;
        }
        
    });

    strategy.addEventListener('click', function(event) {
        let strat = strategy.getAttribute('selection');
        switch(strat) {
            case 'SMA Crossover':
                strategy_code.innerHTML = `
        sma_long = self.sma(period=50)
        sma_short = self.sma(period=20)
        if self.crossover(sma_long, sma_short):
            self.buy()
        elif self.crossover(sma_short, sma_long):
            self.sell()`;
                break;
            case 'RSI':
                strategy_code.innerHTML = `
        rsi = self.rsi(period=14)
        if self.rsi[-1] > 70:
            self.sell()
        elif self.rsi[-1] < 30:
            self.buy()`;
                break;
        }
    });
    

</script>
    </main>
    <footer>
   
    <div>
        <div>

        <a href="https://github.com/tfukaza/harvest/issues/new?assignees=&labels=bug&template=bug_report.md&title=%5B%F0%9F%AA%B0BUG%5D">Report a Bug</a>
        <a href="https://github.com/tfukaza/harvest/issues/new?assignees=&labels=enhancement%2C+question&template=feature-request.md&title=%5B%F0%9F%92%A1Feature+Request%5D">Suggest a Feature</a>
    </div>
  </div>
</footer>
</body>
